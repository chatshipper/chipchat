version: v1.0
name: Chipchat Test
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Test
    task:
      secrets:
        - name: devToken
      jobs:
        - name: Test
          commands:
            - checkout
            - sem-version node 12
            - cache restore
            - npm install
            - cache store
            - npm run build --if-present
            - npm test
      env_vars:
        - name: REFRESHTOKEN
          value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWU3MzcyNDQ4ZDk5NDAwMTExNTFmNDIiLCJvcmdhbml6YXRpb24iOiI1ZWU3MzE3ZWZmYThjYTAwMTE3Yzk5MGUiLCJzY29wZSI6InZpZXdlciBndWVzdCBhZ2VudCBib3QgYWRtaW4iLCJncmFudF90eXBlIjoicmVmcmVzaF90b2tlbiIsImlhdCI6MTU5NTIxMTEwNX0.UCXq01muuiprkUaeAjhotGhAg6LBxGILd_3qmLGWNFY
        - name: TOKEN
          value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWU3MzcyNDQ4ZDk5NDAwMTExNTFmNDIiLCJvcmdhbml6YXRpb24iOiI1ZWU3MzE3ZWZmYThjYTAwMTE3Yzk5MGUiLCJzY29wZSI6InZpZXdlciBndWVzdCBhZ2VudCBib3QgYWRtaW4iLCJncmFudF90eXBlIjoiYWNjZXNzX3Rva2VuIiwiaWF0IjoxNTk1MjExMTA1fQ.2gn-I57NvSzmWV3NSW8kRUGX9zpC3ax6Uq6mKHqEFyk
